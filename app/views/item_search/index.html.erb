<% content_for :head do %>
  <%= requirejs_include_tag "item_search" %>
<% end -%>

<div id="item_search">
  <div class="container item_search_form_area">
    <%= form_tag({}, { :id => "search_form" }) do %>
      <%= text_field_tag :query, '',{ :class => 'input-medium search-query', :placeholder => 'キーワードを入力して検索！' } %>
      <%= submit_tag "検索", { :id => 'search_btn', :class => "btn" } %>
    <% end %>
  </div>

  <div class="row-fluid offset1" id="products_area">
  </div>

  <div id="add-item-dialog" title="add item">
    <%= form_tag({}, { :id => "add-item-form" }) do %>
      <label for="target-item">追加するアイテム</label>
      <p id="target-item"></p>
      <label for="checklists">チェックリスト</label>
      <%= select_tag("checklists", options_from_collection_for_select(@check_lists, :id, :name)) %>
      <label for="comment">コメント</label>
      <%= text_field_tag :comment, '',{ :class => 'input-medium' } %>
    <% end %>
  </div>
</div>

<script type="text/template" id="product_template">
  <div class="row-fluid product">
    <div class="span3">
      <img src="{{= image_url}}" class="img-polaroid" />
    </div>
    <div class="span8">
      <div>
        <a href="{{= item_url }}" target="_blank">{{= title }}</a>
      </div>
      <div>
        {{= creater_name }} / {{= publisher }} / {{= release_date }}
      </div>
      <div class="icons pull-right">
        <button type="button" class="btn btn-default btn-lg add-item">
          <i class="icon-plus"></i>
        </button>
      </div>
    </div>
  </div>
</script>
